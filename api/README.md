# API –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–µ –ø–æ–¥—à–∏–ø–Ω–∏–∫–æ–≤

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π RESTful API —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏ –ø–æ–∏—Å–∫–∞.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# 2. –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ (–ø–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫)
python scripts/build_autocomplete_dict.py
python scripts/build_search_index.py

# 3. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
uvicorn api.app.api:app --reload

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–¥–æ–±–Ω—ã–π —Å–∫—Ä–∏–ø—Ç:
./start_api.sh
```

API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ: `http://localhost:8000`

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Swagger: `http://localhost:8000/docs`

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
api/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ api.py           # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ endpoints
‚îÇ   ‚îú‚îÄ‚îÄ logic.py         # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (–∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ, –ø–æ–∏—Å–∫)
‚îÇ   ‚îî‚îÄ‚îÄ export_utils.py  # –£—Ç–∏–ª–∏—Ç—ã —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ JSON/CSV/XLSX
‚îú‚îÄ‚îÄ tests/               # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ test_autocomplete.py
‚îÇ   ‚îú‚îÄ‚îÄ test_similar_documents.py
‚îÇ   ‚îî‚îÄ‚îÄ test_export.py
‚îî‚îÄ‚îÄ examples/            # –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
    ‚îî‚îÄ‚îÄ search_features.py
```

## ‚ö° –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ
```bash
curl "http://localhost:8000/autocomplete?q=–ø–æ–¥"
```

### 2. –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ —Å –ø–æ—Ö–æ–∂–∏–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
```bash
curl "http://localhost:8000/search?q=6205&include_similar=true"
```

### 3. –ò—Å—Ç–æ—Ä–∏—è –ø–æ–∏—Å–∫–∞
```bash
curl "http://localhost:8000/history?user_id=user123"
```

### 4. –≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
```bash
# CSV
curl "http://localhost:8000/search/export?q=6205&format=csv" > results.csv

# Excel
curl "http://localhost:8000/search/export?q=6205&format=xlsx" > results.xlsx
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API: [API_DOCUMENTATION.md](../99_IT_–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è/API_DOCUMENTATION.md)

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ pytest
pip install pytest

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
pytest api/tests/ -v
```

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤

–ò–Ω–¥–µ–∫—Å—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ GitHub Actions –∫–∞–∂–¥–æ–µ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ.

–î–ª—è —Ä—É—á–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:
```bash
python scripts/build_autocomplete_dict.py
python scripts/build_search_index.py
```

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **FastAPI** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **scikit-learn** - TF-IDF –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Å—Ö–æ–∂–µ—Å—Ç–∏
- **pandas + openpyxl** - —ç–∫—Å–ø–æ—Ä—Ç –≤ Excel
- **pytest** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä:
```bash
python api/examples/search_features.py
```

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

**–ü—Ä–æ–±–ª–µ–º–∞:** `ModuleNotFoundError: No module named 'fastapi'`
- –†–µ—à–µ–Ω–∏–µ: `pip install -r requirements.txt`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è
- –†–µ—à–µ–Ω–∏–µ: –ü–æ—Å—Ç—Ä–æ–π—Ç–µ –∏–Ω–¥–µ–∫—Å—ã: `python scripts/build_autocomplete_dict.py`

**–ü—Ä–æ–±–ª–µ–º–∞:** –û—à–∏–±–∫–∞ –ø—Ä–∏ —ç–∫—Å–ø–æ—Ä—Ç–µ –≤ Excel
- –†–µ—à–µ–Ω–∏–µ: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `pip install pandas openpyxl`

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–í–æ–ø—Ä–æ—Å—ã –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è: [GitHub Issues](https://github.com/ArtemFilin1990/Mar/issues)
